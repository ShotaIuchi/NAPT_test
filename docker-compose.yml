services:
  docker1:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: docker1
    privileged: true
    networks:
      network10:
        ipv4_address: 192.168.10.10
    command: ["bash", "-c", "while true; do sleep 3600; done"]

  dockerbridge:
    build:
      context: .
      dockerfile: Dockerfile.bridge
    container_name: dockerbridge
    privileged: true
    networks:
      network10:
        ipv4_address: 192.168.10.11
      network20:
        ipv4_address: 192.168.20.11

  docker2:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: docker2
    privileged: true
    networks:
      network20:
        ipv4_address: 192.168.20.10
    command: ["bash", "-c", "while true; do sleep 3600; done"]

networks:
  network10:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.10.0/24
  network20:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.20.0/24
